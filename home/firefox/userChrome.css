:root {
  &[uidensity="compact"] {
    --tab-min-height: 20px !important;
  }

  /* Urlbar and separator colors */
  --toolbar-field-background-color: #181818 !important;
  --toolbar-field-focus-background-color: #181818 !important;
  --toolbar-field-color: #ffffff !important;
  --toolbar-field-focus-color: #ffffff !important;
  --chrome-content-separator-color: #181818 !important;
}

/* Notification bar fixed at bottom */
#notifications-toolbar {
  position: fixed !important;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9;
}

/* Hide sidebar header */
#sidebar-header {
  display: none !important;
}

/* Nav bar hidden until hover/focus */
#nav-bar {
  position: absolute !important;
  top: 0 !important;
  left: 0;
  right: 0;
  margin: 0 !important;
  padding: 0 !important;
  overflow: hidden !important;
  z-index: 9999 !important;
  opacity: 0 !important;
  background-color: #181818 !important;
}

#urlbar {
  opacity: 0 !important;
  pointer-events: none !important;
}

#navigator-toolbox:is(:hover, :focus-within) #nav-bar {
  top: 44px !important;
  opacity: 1 !important;
}

#navigator-toolbox:is(:hover, :focus-within) #urlbar {
  opacity: 1 !important;
  pointer-events: auto !important;
}

/* Toolbox background + no separator line */
#navigator-toolbox {
  position: relative !important;
  z-index: 10000 !important;
  background-color: #181818 !important;
  border-bottom: none !important;
  box-shadow: none !important;
}

/* Tabs */
.tab-background {
  min-height: 0 !important;
  background-color: #282828 !important;
  border: 1px solid rgba(128, 128, 128, 1.0) !important;
}

.tab-text {
  margin: 0 auto !important;
}

/* Make tabs wide */
.tabbrowser-tab[fadein] {
  max-width: 100vw !important;
}

/* Center tab icon + tighten label width */
.tab-icon-stack {
  margin-inline-start: auto !important;
}

.tab-label-container {
  max-width: min-content !important;
  margin-inline-end: auto !important;
}

/* Titlebar spacers */
.titlebar-spacer[type="pre-tabs"],
.titlebar-spacer[type="post-tabs"] {
  width: 30px !important;
}

:root:not([sizemode="normal"]) .titlebar-spacer[type="pre-tabs"] {
  display: block !important;
}

@media (max-width: 500px) {
  .titlebar-spacer[type="post-tabs"] {
    display: block !important;
  }
}

/* Hide window + tab chrome buttons */
.tab-close-button,
#TabsToolbar .toolbarbutton-1,
.titlebar-buttonbox-container {
  display: none !important;
}

/* Tabs toolbar background and text */
#TabsToolbar {
  background-color: #181818 !important;
}

.tabbrowser-tab[selected="true"] .tab-background {
  background-color: #484848 !important;
}

.tabbrowser-tab .tab-label {
  color: white !important;
}

/* Toolbar labels/icons white (but not everything) */
#nav-bar .toolbarbutton-text,
#nav-bar .toolbarbutton-icon,
#TabsToolbar .toolbarbutton-text,
#TabsToolbar .toolbarbutton-icon {
  color: white !important;
}

/* Only builtâ€‘in icons white, not extensions */
#nav-bar toolbarbutton:not(.webextension-browser-action) .toolbarbutton-icon {
  filter: brightness(0) invert(1) !important;
}

/* Global font */
* {
  font-family: system-ui !important;
}

/* Dark menus/panels */
menupopup,
panel {
  --panel-background: black !important;
  --panel-color: white !important;
  --panel-border-radius: 0px !important;
}

#appMenu-popup,
#appMenu-popup * {
  background-color: #000 !important;
  color: #fff !important;
}

/* Unified Extensions: grid layout */
#unified-extensions-view {
  width: fit-content !important;
}

#unified-extensions-panel .panel-subview-body > * {
  display: grid !important;
  grid-template-columns: repeat(5, 1fr) !important;
  justify-items: center !important;
  gap: 0 !important;
}

#unified-extensions-panel #unified-extensions-area,
#unified-extensions-panel #overflowed-extensions-list {
  display: grid !important;
  grid-template-columns: repeat(5, 1fr) !important;
  justify-items: center !important;
}

:is(panelview, #unified-extensions-area, #overflowed-extensions-list) .toolbaritem-combined-buttons,
#unified-extensions-panel .unified-extensions-item {
  margin: 0 !important;
}

#unified-extensions-panel #unified-extensions-area > .unified-extensions-item,
#unified-extensions-panel #overflowed-extensions-list > .unified-extensions-item {
  width: 60.6px !important;
  height: 60.6px !important;
  max-width: none !important;
  max-height: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

#unified-extensions-panel .unified-extensions-item-row-wrapper {
  padding: 0 !important;
  margin: 0 !important;
}

#unified-extensions-panel #unified-extensions-area .unified-extensions-item-action-button,
#unified-extensions-panel #overflowed-extensions-list .unified-extensions-item-action-button {
  width: 100% !important;
  height: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
}

#unified-extensions-panel #unified-extensions-area .unified-extensions-item-action-button > .toolbarbutton-badge-stack,
#unified-extensions-panel #overflowed-extensions-list .unified-extensions-item-action-button > .toolbarbutton-badge-stack,
#unified-extensions-panel .unified-extensions-list .unified-extensions-item-action-button {
  display: grid !important;
  width: 100% !important;
  height: 100% !important;
  padding: 20% !important;
  margin: 0 !important;
  justify-content: center !important;
  align-items: center !important;
}

#unified-extensions-panel .unified-extensions-item-action-button image.toolbarbutton-icon {
  width: 26px !important;
  height: 26px !important;
  margin: auto !important;
}

#unified-extensions-panel .unified-extensions-list,
#unified-extensions-panel .unified-extensions-item-menu-button,
#unified-extensions-panel .unified-extensions-item-contents,
#unified-extensions-panel .unified-extensions-item-action-button > .toolbarbutton-text {
  display: none !important;
}

#unified-extensions-panel .subviewbutton {
  margin: 0 !important;
}

#nav-bar-customization-target > .unified-extensions-item {
  filter: saturate(0%) brightness(120%) !important;
}

#customization-panelHolder > #unified-extensions-area > toolbarpaletteitem:not([notransition])[place="panel"] {
  border-block-width: 0 !important;
  transition: padding var(--drag-drop-transition-duration) ease-in-out !important;
}

#customization-panelHolder > #unified-extensions-area > toolbarpaletteitem:not([notransition])[place="panel"][dragover="before"] {
  padding-inline-start: 20px !important;
}

#customization-panelHolder > #unified-extensions-area > toolbarpaletteitem:not([notransition])[place="panel"][dragover="after"] {
  padding-inline-end: 20px !important;
}

/* Urlbar field: dark background, white text */
#urlbar,
#urlbar-background,
#urlbar-input-container {
  background-color: #181818 !important;
}

#urlbar-input,
#urlbar-input::placeholder {
  color: #ffffff !important;
}

/* Urlbar suggestions: dark background, white text, colored icons */
.urlbarView,
.urlbarView-row,
.urlbarView-row-inner,
.urlbarView-row[aria-selected="true"] {
  background-color: #000 !important;
}

/* Highlight currently selected urlbar suggestion (Tab selection) */
.urlbarView-row[aria-selected="true"] .urlbarView-row-inner {
  background-color: #303030 !important;  /* or any color you like */
  outline: 1px solid #666 !important;    /* optional, for extra contrast */
}

/* Optional: also highlight on keyboard focus */
.urlbarView-row:is([selected], [aria-selected="true"]) .urlbarView-row-inner {
  background-color: #303030 !important;
}

.urlbarView-title,
.urlbarView-secondary,
.urlbarView-url,
.urlbarView-action {
  color: #fff !important;
}

#urlbar .search-one-offs button,
#urlbar .search-one-offs button .toolbarbutton-icon,
#urlbar .search-one-offs .searchbar-engine-one-off-item,
#urlbar .search-one-offs .searchbar-engine-one-off-item .toolbarbutton-icon,
#urlbar .search-one-offs .urlbarView-favicon,
#urlbar .search-one-offs .urlbarView-favicon > img,
#urlbar .search-one-offs .urlbarView-favicon > image {
  color: initial !important;
  filter: none !important;
}

/* Darken the strip under the tabs/content edge */
#navigator-toolbox::after,
#tabbrowser-tabbox,
#browser,
#appcontent {
  background-color: #181818 !important;
}

